<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Formulario animado</title>
    <link rel="stylesheet" href="estilos.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-analytics.js"></script>
    <script src="js/init.js"></script>
  </head>
  <body>
    <form action="" class="formulario">
      <h1 class="formulario__titulo">Contáctenos</h1>
      <input type="text" class="formulario__input" />
      <label for="" class="formulario__label">Nombres</label>
      <input type="text" class="formulario__input" />
      <label for="" class="formulario__label">Correo</label>
      <input type="text" class="formulario__input" />
      <label for="" class="formulario__label">Télefono</label>
      <input type="text" class="formulario__input" />
      <label for="" class="formulario__label">Mensaje</label>
      <input type="submit" class="formulario__submit" />
    </form>
    <script src="form.js"></script>
    <script>
      //@ts-check
      /** Conexión al sistema de autentificacion de Firebase */
      // @ts-ignore
      const auth = firebase.auth();
      /** Tipo de autentificación de usuarios. En este caso es Google. */
      // @ts-ignore
      const provider = new firebase.auth.GoogleAuthProvider();
      /** Configura el proveedor de Google para que te permita seleccionar de una 
      * lista. */
      provider.setCustomParameters({ prompt: "select_account" });
      /* Recibe una función que se invoca cadaque hay un cambio en la 
      * autentificación y recibe el modelo con las caracteristicas del usuario. */
      auth.onAuthStateChanged(
        /* Recibe las caracteristicas del usuario o null su no ha iniciado
        * sesión. */
        usuarioAuth =>{
          if (usuarioAuth && usuarioAuth.nombres){
            // Usuario aceptado.
            // @ts-ignore Muestra el email registrado en Google.
            nombres.value = usuarioAuth.nombres;
            //@ts-ignore Muestra el nombre registrado en Google.
          }else{
            // No ha iniciado sesión. Pide datos para iniciar sesión.
            auth.singInWithRedirect(provider);
          }
        }
    </script>
  </body>
</html>
